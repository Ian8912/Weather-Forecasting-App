var ie=Object.defineProperty;var ce=(t,n,r)=>n in t?ie(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var B=(t,n,r)=>ce(t,typeof n!="symbol"?n+"":n,r);import{c as de,r as s,j as e,L as O,u as he,M as Y,a as ue,S as U,b as K,i as J,g as X,d as me,e as xe,B as pe,R as ge,f as T}from"./vendor-DOpmtunm.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const fe="https://ycxxtghqmctedtxezpck.supabase.co",be="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljeHh0Z2hxbWN0ZWR0eGV6cGNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzMyMTIwNTEsImV4cCI6MjA0ODc4ODA1MX0.dm3TQHlY2Oz2Wcws2fn9wkWK0nmMmwtEaFoVvzJSqAY",je=de(fe,be),q={enterCoordinates:"Enter Coordinates",Latitude:"Latitude",Longitude:"Longitude",Submit:"Submit",enterLat:"Enter latitude",enterLon:"Enter longitude",Features:"Features",accurateForecasts:"Accurate Forecasts",reportLocation:"Get up-to-the-minute weather reports based on your location.",interactiveMaps:"Interactive Maps",weatherMaps:"Visualize weather patterns with dynamic weather maps.",alertsWarnings:"Alerts & Warnings",timelyAlerts:"Receive timely alerts on severe weather conditions in your area.",closeMap:"To close map, click outside the modal.",Legend:"Legend",Clouds:"Clouds",Precipitation:"Precipitation",Temperature:"Temperature",feedbackForm:"Feedback Form",Email:"Email",Feedback:"Feedback",yourFeedback:"We'd Love Your Feedback",Name:"Name",High:"High",Low:"Low",windSpeed:"Wind Speed",windDescription:"Wind Description",Wind:"Wind",Home:"Home",Contact:"Contact",logIn:"Log in",Latest:"Get the Latest Weather Updates",cityName:"Enter a city name to get current weather updates.",enterName:"Enter city name",currentWeather:"Current Weather",Load:"Loading weather data...",noWeather:"No weather data available. Please enter a city to check the weather.",weatherFor:"Weather for",Condition:"Condition",Humidity:"Humidity",UV:"UV Index",MaxUV:"Max UV Index",Air:"Air Quality",Nodata:"No weather data available.",Rights:"All rights reserved.",Give:"Give Feedback",enterLan:"Enter your perferred language.",English:"English",Spanish:"Spanish",French:"French",German:"German"},Z=s.createContext(),ye="http://localhost:5000",E=()=>s.useContext(Z),ve=({children:t})=>{const[n,r]=s.useState("EN"),[l,o]=s.useState({}),i=async(d,h)=>{try{const c=await fetch(`${ye}/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({texts:Object.values(d),target_lang:h})});if(!c.ok){const g=await c.json();throw new Error(g.error||"Translation API failed")}const x=await c.json(),j={};Object.keys(d).forEach((g,S)=>{j[g]=x.translated_texts[S]}),o(j)}catch(c){console.error("Translation error:",c),alert("Translation failed. Please try again later.")}},a=async d=>{r(d),await i(q,d)};return s.useEffect(()=>{o(q)},[]),e.jsx(Z.Provider,{value:{language:n,translatedText:l,handleLanguageChange:a},children:t})},P=()=>{const[t,n]=s.useState(!1),[r,l]=s.useState(!1),{translatedText:o}=E();return e.jsx("div",{className:t?"dark":"",children:e.jsxs("nav",{className:"fixed top-0 left-0 w-full bg-white dark:bg-[#312e81] text-black dark:text-[#cbd5e1] z-50 shadow-md",children:[e.jsxs("div",{className:"container mx-auto flex justify-between items-center py-4 px-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"WeatherLink"}),e.jsx("button",{onClick:()=>l(!r),className:"md:hidden text-black dark:text-white focus:outline-none",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("ul",{className:"hidden md:flex space-x-6",children:[e.jsx("li",{children:e.jsx(O,{to:"/",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:o.Home})}),e.jsx("li",{children:e.jsx(O,{to:"/tailored-advice",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:"Tailored Advice"})}),e.jsx("li",{children:e.jsx(O,{to:"/news",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:"News"})}),e.jsx("li",{children:e.jsx(O,{to:"/contact",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:o.Contact})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>n(!t),className:"ml-1 px-2 py-1 text-sm bg-blue-500 text-white dark:bg-[#1e1b4b] dark:text-[#cbd5e1] rounded-lg",children:t?"Light Mode":"Dark Mode"})})]})]}),r&&e.jsxs("ul",{className:"md:hidden flex flex-col space-y-4 mt-4 text-center",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:o.Home})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:o.Features})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:o.Contact})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:o.logIn})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>n(!t),className:"ml-1 px-2 py-1 bg-blue-500 text-white dark:bg-[#1e1b4b] dark:text-[#cbd5e1] rounded-lg",children:t?"Light Mode":"Dark Mode"})})]})]})})},we=t=>(console.error("Error: ",t),{errorMessage:"An error occurred. Please try again later."}),Ne=(t,n)=>t.ok?t:{errorMessage:n||"Failed to fetch data from the server."},ke=(t,n)=>n?null:{errorMessage:`${t} is required.`},R={handleError:we,handleApiError:Ne,handleValidationError:ke},Se=()=>{const[t,n]=s.useState(null),[r,l]=s.useState(null),{translatedText:o}=E(),i=he(),{lat:a,long:d}=i.state||{};return s.useEffect(()=>{a&&d&&fetch(`${API_BASE_URL}/coords/${a}/${d}/`).then(h=>{const c=R.handleApiError(h,"Failed to fetch weather data.");return c.errorMessage&&l(c.errorMessage),c.json()}).then(h=>{n(h)}).catch(h=>{const c=R.handleError(h);l(c.errorMessage)})},[a,d]),e.jsxs("div",{className:"py-8",children:[r&&e.jsx("p",{className:"text-red-500",children:r}),e.jsxs("div",{className:"container mx-auto text-center",children:[e.jsx(P,{}),e.jsxs("header",{className:"bg-blue-500 dark:bg-[#1e1b4b] dark:text-[#cbd5e1] flex-col text-white py-24 text-center",children:[e.jsx("h2",{className:"text-4xl font-bold",children:o.currentWeather}),t?e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-[#312e81] dark:text-[#cbd5e1] rounded-lg shadow-lg",children:[e.jsx("h3",{className:"text-2xl text-[#1e3a8a] dark:bg-[#312e81] dark:text-[#cbd5e1] font-bold",children:t.city}),e.jsx("h3",{className:"text-xl text-[#1e3a8a] dark:bg-[#312e81] dark:text-[#cbd5e1] font-bold",children:t.description})]}):e.jsx("p",{className:"text-center dark:text-[#cbd5e1]",children:o.Load})]})]})]})},Ee=({id:t})=>e.jsx("img",{src:`https://openweathermap.org/img/wn/${t}@2x.png`,alt:"Weather Icon"});class Ce{constructor(){B(this,"OpenMeteoPrecipitateIconMapping",{"No rain":"01n","Light rain":"10n","Moderate rain":"10n","Heavy rain":"10n","Light snow":"13n","Moderate snow":"13n","Heavy snow":"13n"});B(this,"OpenMeteoWindIconMapping",{Calm:"calm.png","Light breeze":"light_breeze.png","Gentle breeze":"gentle_breeze.png","Moderate breeze":"moderate_breeze.png","Strong breeze":"strong_breeze.png"})}OpenMeteoForecastingIcons(n,r){const l=this.OpenMeteoPrecipitateIconMapping[n]||"default_precipitate.png";return this.OpenMeteoWindIconMapping[r],{precipitateIcon:`https://openweathermap.org/img/wn/${l}@2x.png`}}OpenWeatherIcons(n){try{const r=`https://openweathermap.org/img/wn/${n}@2x.png`;if(!fetch(r).ok)throw new Error(`Image not found for ID: ${n}`);return r}catch(r){console.log(r)}}}const Me=({icon:t,date:n,maxC:r,maxF:l,minC:o,minF:i,precipitationDescription:a,winddescription:d,windspeed:h,isFahrenheit:c})=>{const{translatedText:x}=E(),j=(N,v,b)=>{const M=b-v;return(N-v)/M*100},g=(i+l)/2,S=j(g,i,l);return e.jsxs("div",{className:"weather-card max-w-xs w-64 h-60 p-4 m-2 bg-white rounded-3xl hover:shadow-2xl transition-transform hover:scale-105 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-left text-lg font-semibold text-gray-800 dark:text-gray-100",children:n}),e.jsx("img",{src:t.precipitateIcon,alt:"Weather Icon",className:"w-12 h-12 md:w-16 md:h-16"})]}),e.jsxs("div",{className:"relative flex items-center mb-4",children:[e.jsx("span",{className:"text-left text-sm md:text-lg text-gray-600 dark:text-gray-300",children:c?`${i}°F `:`${o}°C`}),e.jsx("div",{className:"w-full h-2 mx-2 bg-gradient-to-r from-blue-400 via-yellow-300 to-red-500 rounded-full relative",children:e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg",style:{left:`${S}%`}})}),e.jsx("span",{className:"text-right text-sm md:text-lg text-gray-600 dark:text-gray-300",children:c?`${l}°F `:`${r}°C`})]}),e.jsxs("div",{className:"flex flex-col text-left space-y-1 text-gray-700 dark:text-gray-300 text-sm md:text-base",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[x.Wind,":"]}),e.jsx("span",{children:d})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[x.windSpeed,":"]}),e.jsxs("span",{children:[h," m/s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[x.Precipitation,":"]}),e.jsx("span",{children:a})]})]})]})},Ie=({forecastData:t,cityhasBeenEntered:n,errorMessage:r,setError:l,isFahrenheit:o})=>{const i=new Ce;return e.jsx("div",{className:"container flex flex-wrap justify-center items-start mx-auto gap-5",children:t?t.map((a,d)=>e.jsx(Me,{icon:i.OpenMeteoForecastingIcons(a.precipitateDescription,a.winddescription),date:d===0?a.date="Today":a.date,maxC:a.maxC,maxF:a.maxF,minC:a.minC,minF:a.minF,precipitationDescription:a.precipitateDescription,winddescription:a.winddescription,windspeed:parseFloat(a.windspeed).toFixed(1),isFahrenheit:o},d)):e.jsx("p",{children:r})})},Ae=()=>{const{language:t,handleLanguageChange:n}=E(),{translatedText:r}=E();return e.jsxs("div",{children:[e.jsx("p",{className:"mt-4 text-lg",children:r.enterLan}),e.jsxs("select",{value:t,onChange:l=>n(l.target.value),className:"appearance-none px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700",children:[e.jsx("option",{value:"EN",children:r.English}),e.jsx("option",{value:"ES",children:r.Spanish}),e.jsx("option",{value:"FR",children:r.French}),e.jsx("option",{value:"DE",children:r.German})]})]})},Le=({city:t,suggestions:n,errorMessage:r,setCity:l,handleCityChange:o,handleCitySelect:i,handleWeatherSubmit:a})=>{const d=c=>{c.key==="Enter"&&a(c)},{translatedText:h}=E();return e.jsxs("header",{className:"dark:bg-[#1e1b4b] dark:text-[#cbd5e1] text-black py-24 text-center",style:{borderRadius:"5rem"},children:[e.jsx("h2",{className:"text-4xl font-bold",children:h.Latest}),e.jsx("p",{className:"mt-4 text-lg",children:h.cityName}),e.jsx(e.Fragment,{children:r&&e.jsx("p",{className:"text-center text-red-500",children:r})}),e.jsx("form",{onSubmit:a,className:"mt-8",children:e.jsxs("div",{className:"relative inline-block w-full max-w-sm",children:[e.jsx("input",{type:"text",value:t,onChange:o,onKeyDown:d,placeholder:h.enterName,className:"text-black w-full px-6 py-3 border rounded-full text-sm shadow-md focus:outline-none focus:border-blue-800"}),n.length>0&&e.jsx("ul",{className:"absolute left-0 right-0 z-10 mt-1 bg-white shadow-lg border rounded text-left",children:n.map((c,x)=>e.jsxs("li",{onClick:()=>i(c),className:"cursor-pointer p-2 bg-blue-50 dark:bg-[#312e81] text-gray-800 dark:text-white hover:bg-gray-400 dark:hover:bg-gray-600",children:[c.name,", ",c.state||""," (",c.country,")"]},x))})]})}),e.jsx(Ae,{})]})},L="http://localhost:5000",$e=({weatherData:t,isFahrenheit:n,setIsFahrenheit:r})=>{const{translatedText:l}=E(),[o,i]=s.useState(!1),[a,d]=s.useState({WEATHER_API_KEY:"",MAP_API_KEY:""}),[h,c]=s.useState({latitude:30.2672,longitude:-97.7431,zoom:9,width:"100%",height:"400px"}),[x,j]=s.useState(!1),[g,S]=s.useState(!1),[N,v]=s.useState(!1),[b,M]=s.useState(null),I=5*60*1e3;s.useEffect(()=>{fetch(`${L}/api/keys`).then(y=>y.json()).then(y=>d(y)).catch(y=>console.error("Error fetching API keys:",y))},[]),s.useEffect(()=>{const y=localStorage.getItem("cachedWeatherData");if(y){const{data:_,timestamp:z}=JSON.parse(y);Date.now()-z<I?(console.log("Using cached weather data:",_),M(_)):(console.log("Cached data is outdated. New fetch required."),localStorage.removeItem("cachedWeatherData"))}},[]),s.useEffect(()=>{if(t){const y=JSON.parse(localStorage.getItem("cachedWeatherData"));if(!y||y.city!==t.city){const _=Date.now();localStorage.setItem("cachedWeatherData",JSON.stringify({data:t,timestamp:_})),console.log("Weather data saved to local storage:",t)}}},[t]);const $=()=>i(!0),k=()=>i(!1),w=()=>{r(!n)};return b||t?e.jsxs("div",{className:"py-8",children:[e.jsx("div",{className:"container rounded-xlmx-auto text-center",children:e.jsx("div",{className:"p-6 flex flex-col items-center text-white",children:e.jsxs("div",{className:"flex relative justify-between items-start w-full bg-blue-500 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("h3",{className:"text-6xl font-bold mr-4",children:n?`${Math.round(t.temperature_fahrenheit)}°F`:`${Math.round(t.temperature_celsius)}°C`}),e.jsx("div",{className:`relative w-14 h-8 flex items-center ${n?"bg-green-300":"bg-gray-300"} dark:bg-gray-700 rounded-full p-1 cursor-pointer transition-all duration-300 ease-in-out ${n?"justify-end":"justify-start"}`,onClick:w,children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out"})}),e.jsx("p",{className:"text-md mt-2 ml-2",children:n?" °F":" °C"})]}),e.jsxs("p",{className:"text-lg mb-4",children:[t.city,", ",t.state||"N/A",", ",t.country]}),e.jsxs("p",{className:"text-lg mb-4",children:["H: ",n?`${Math.round(t.max_temp_fahrenheit)}°F`:`${Math.round(t.max_temp_celsius)}°C`,"   L: ",n?`${Math.round(t.min_temp_fahrenheit)}°F`:`${Math.round(t.min_temp_celsius)}°C`]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Ee,{id:t.openweathericonid})}),e.jsx("p",{className:"text-xl mt-4",children:t.description}),e.jsxs("div",{className:"mt-4 space-y-2 text-center flex flex-col items-center",children:[e.jsxs("div",{className:"flex flex-wrap gap-x-4 justify-center",children:[e.jsxs("p",{className:"text-lg",children:[l.Humidity,": ",t.humidity,"%"]}),e.jsxs("p",{className:"text-lg",children:[l.Air,": ",t.air_quality," AQI"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 justify-center",children:[e.jsxs("p",{className:"text-lg",children:[l.UV,": ",t.uv_index?Number(t.uv_index).toFixed(2):"N/A"]}),e.jsxs("p",{className:"text-lg",children:[l.MaxUV,": ",t.max_uv_index?Number(t.max_uv_index).toFixed(2):"N/A"]})]})]})]}),e.jsxs("div",{className:"absolute top-1/2 right-8 transform -translate-y-1/2",children:[e.jsx("div",{className:"absolute inset-0 w-80px h-80px rounded-full bg-white/10 z-[-1]"}),e.jsx("img",{src:"/images/Realistic_Earth_Image.png",alt:"Globe with Transparent Background",onClick:$,className:"cursor-pointer hover:scale-110 hover:rotate-6 transition-transform duration-200 group-hover:shadow-lg",style:{width:"200px",height:"200px",borderRadius:"50%",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",clipPath:"circle(45% at 50% 50%)",animation:"float 3s ease-in-out infinite",perspective:"1000px",filter:"drop-shadow(0 0 10px rgba(0, 128, 255, 0.5))"}})]})]})})}),e.jsxs(Y,{isOpen:o,onRequestClose:k,contentLabel:"Map Modal",style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"},content:{width:"90%",height:"80%",margin:"auto",padding:"0",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"10px",overflow:"hidden"}},children:[e.jsx("div",{style:{position:"absolute",top:"10px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"5px",fontSize:"14px",textAlign:"center"},children:l.closeMap}),e.jsxs("div",{className:"absolute top-4 left-4 bg-black bg-opacity-70 text-white p-4 rounded-md z-10",children:[e.jsx("h4",{children:l.Legend}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>j(!x)}),l.Clouds]}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:g,onChange:()=>S(!g)}),l.Precipitation]}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:N,onChange:()=>v(!N)}),l.Temperature]})]}),e.jsxs(ue,{...h,mapboxAccessToken:a.MAP_API_KEY,onMove:y=>c(y.viewState),mapStyle:"mapbox://styles/mapbox/streets-v11",scrollZoom:!0,dragPan:!0,touchRotate:!0,children:[x&&e.jsx(U,{id:"clouds",type:"raster",tiles:[`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${a.WEATHER_API_KEY}`],tileSize:256,children:e.jsx(K,{id:"clouds-layer",type:"raster"})}),g&&e.jsx(U,{id:"precipitation",type:"raster",tiles:[`https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=${a.WEATHER_API_KEY}`],tileSize:256,children:e.jsx(K,{id:"precipitation-layer",type:"raster"})}),N&&e.jsx(U,{id:"temperature",type:"raster",tiles:[`https://tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=${a.WEATHER_API_KEY}`],tileSize:256,children:e.jsx(K,{id:"temperature-layer",type:"raster"})})]})]})]}):e.jsx("p",{children:l.noWeather})},Fe=({weatherData:t,city:n,cityHasBeenEntered:r,errorMessage:l,setErrorMessage:o,loading:i})=>{const[a,d]=s.useState(!0),[h,c]=s.useState([]),[x,j]=s.useState(null),{translatedText:g}=E();s.useEffect(()=>{t&&(async()=>{try{if(!t||!t.city)throw new Error("City data is missing.");const v=await fetch(`${L}/forecast?city=${t.city}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!v.ok)throw new Error(`Failed to fetch forecast: ${v.statusText}`);const b=await v.json();c(b),j(null)}catch(v){console.error("Error fetching forecast:",v.message),j(v.message)}})()},[t]);const S=()=>e.jsxs("div",{className:"flex justify-center items-center py-16",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"dark:text-[#cbd5e1] text-lg ml-4",children:g.Load})]});return e.jsx("div",{className:"flex flex-col items-center justify-center w-full unified-weather-card rounded-3xl bg-blue-500",style:{borderRadius:"5rem",transform:"scale(0.9)",transformOrigin:"top center"},children:i?e.jsx(S,{}):e.jsxs("div",{className:"pb-6",children:[e.jsx($e,{weatherData:t,isFahrenheit:a,setIsFahrenheit:d}),x?e.jsx("p",{className:"text-red-500 text-center",children:g.ForecastError||"Error fetching forecast."}):e.jsx(Ie,{forecastData:h,cityHasBeenEntered:r,errorMessage:l,setError:o,isFahrenheit:a})]})})},Q=({isVisible:t,onClose:n,onSubmit:r,formData:l,handleFeedbackChange:o,errorMessage:i})=>{if(!t)return null;const{translatedText:a}=E();return e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg relative",children:[e.jsx("button",{onClick:n,className:"absolute top-2 right-2 text-gray-600 hover:text-gray-800","aria-label":"Close",children:"×"}),e.jsx("h2",{className:"text-xl font-bold text-center mb-4",children:(a==null?void 0:a.feedbackTitle)||"We'd Love Your Feedback"}),e.jsxs("form",{onSubmit:r,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:(a==null?void 0:a.nameLabel)||"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:o,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:(a==null?void 0:a.emailLabel)||"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:o,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700",children:(a==null?void 0:a.feedbackLabel)||"Feedback"}),e.jsx("textarea",{id:"feedback",name:"feedback",value:l.feedback,onChange:o,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),i&&e.jsx("div",{className:"text-red-600 text-sm mb-4",children:i}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600 transition duration-200",children:(a==null?void 0:a.submitButton)||"Submit Feedback"})]})]})})},_e={apiKey:"AIzaSyA2iOAOb0KDad1VGYCgsvKKq8tVOqAXkgI",authDomain:"weatherlinkdatabase.firebaseapp.com",projectId:"weatherlinkdatabase",storageBucket:"weatherlinkdatabase.appspot.com",messagingSenderId:"1071771666509",appId:"1:1071771666509:web:d977aa23171039bfd9b404"},Te={apiKey:"AIzaSyA2iOAOb0KDad1VGYCgsvKKq8tVOqAXkgI",authDomain:"weatherlinkdatabase.firebaseapp.com",projectId:"weatherlinkdatabase",storageBucket:"weatherlinkdatabase.firebasestorage.app",messagingSenderId:"1071771666509",appId:"1:1071771666509:web:d977aa23171039bfd9b404"},Pe=J(_e),We=J(Te,"feedbackApp");X(Pe);X(We);const Oe=({onCityClick:t,onRemoveCity:n})=>{const[r,l]=s.useState([]),[o,i]=s.useState(null),[a,d]=s.useState(!0);return s.useEffect(()=>{(async()=>{try{const c=await fetch("http://localhost:3001/api/recent-cities");if(c.ok){const x=await c.json();console.log("Fetched data:",x),l(x)}else console.error("Failed to fetch recent cities:",c.statusText),i("Failed to load recent cities.")}catch(c){console.error("Error fetching recent cities:",c),i("An error occurred while fetching cities.")}finally{d(!1)}})()},[]),e.jsxs("div",{className:"history-saved-cities",children:[e.jsx("h3",{children:"Recent & Saved Cities"}),o&&e.jsx("p",{className:"error-message",children:o}),a?e.jsx("p",{children:"Loading cities..."}):e.jsx("ul",{className:"city-list",children:r.length>0?r.map((h,c)=>e.jsxs("li",{className:"city-item",children:[e.jsxs("div",{className:"city-info",onClick:()=>t==null?void 0:t(h.name),children:[e.jsx("img",{src:h.icon,alt:`${h.weather} icon`,className:"weather-icon"}),e.jsxs("div",{children:[e.jsx("p",{className:"city-name",children:h.name}),e.jsxs("p",{className:"city-temp",children:[h.temperature,"°C"]})]})]}),h.isSaved&&e.jsx("button",{className:"remove-button",onClick:x=>{x.stopPropagation(),n==null||n(h.name)},children:"Remove"})]},`${h.name}-${c}`)):e.jsx("p",{children:"No cities to display."})})]})};Y.setAppElement("#root");const Re=()=>e.jsxs("div",{className:"flex justify-center items-center py-16",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"dark:text-[#cbd5e1] text-lg ml-4",children:"Loading weather data..."})]});function ze(){const[t,n]=s.useState("day"),[r,l]=s.useState({name:"",email:"",feedback:""}),[o,i]=s.useState(!1);s.useState(!1);const{translatedText:a}=E(),[d,h]=s.useState(null),[c,x]=s.useState(!1),[j,g]=s.useState(""),[S,N]=s.useState([]),[v,b]=s.useState(null),[M,I]=s.useState(!1);s.useState(null);const[$,k]=s.useState(!1),[w,F]=s.useState([{name:"New York",temperature:22,icon:"https://openweathermap.org/img/wn/01d@2x.png",weather:"Sunny",isSaved:!0},{name:"San Francisco",temperature:18,icon:"https://openweathermap.org/img/wn/04d@2x.png",weather:"Cloudy",isSaved:!1}]),y=u=>{console.log(`Clicked on city: ${u}`)},_=u=>{F(m=>m.filter(p=>p.name!==u))},z=(u,m)=>{x(!0),fetch(`${L}/weather?lat=${u}&lon=${m}`).then(p=>{const f=R.handleApiError(p,"Failed to fetch weather data.");return f.errorMessage&&b(f.errorMessage),f.json()}).then(p=>{console.log(p),h(p),x(!1)}).catch(p=>{const f=R.handleError(p);b(f.errorMessage),x(!1)})};s.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(u=>{const{latitude:m,longitude:p}=u.coords;z(m,p)},u=>{b("Unable to access location. Please enter a city manually.")}):b("Geolocation is not supported by your browser.")},[]);const ee=u=>{const m=u.getHours();return m>=6&&m<12?"morning":m>=12&&m<18?"day":m>=18&&m<21?"evening":"night"};s.useEffect(()=>{const m=ee(new Date);n(m)},[]),s.useEffect(()=>{if(t!=="night")return;const u=document.querySelector(".shooting-stars");if(!u)return;const p=setInterval(()=>{const f=document.createElement("div");f.className="shooting-star";const C=Math.random()*100;f.style.setProperty("--x",`${C}vw`),u.appendChild(f),setTimeout(()=>{u.removeChild(f)},5e3)},Math.random()*3e3+3e3);return()=>clearInterval(p)},[t]),s.useEffect(()=>{const u=document.querySelector(".clouds");if(!u)return;const m=()=>{const f=document.createElement("div");f.className="cloud";const C=["shape-1","shape-2","shape-3","shape-4"],D=C[Math.floor(Math.random()*C.length)];f.classList.add(D);const V=Math.random()>.5?"small":"large";f.classList.add(V);const A=Math.random()*30;f.style.top=`${A}vh`;const le=Math.random()*10;f.style.animationDelay=`${le}s`,u.appendChild(f),setTimeout(()=>{u.contains(f)&&u.removeChild(f)},5e4)},p=setInterval(()=>{document.querySelectorAll(".cloud").length<10&&m()},5e3);return()=>clearInterval(p)},[]);const te=u=>{if(u.preventDefault(),!j){alert("Please enter a city");return}x(!0),fetch(`${L}/weather?city=${j}`).then(m=>{if(!m.ok)throw m.status===404?new Error("City not found. Please try again."):new Error("Failed to fetch weather data. Please try again later.");return m.json()}).then(m=>{h(m),x(!1),N([]),b(null),setRecentHistory(p=>{const f=p.filter(C=>C.name!==j);return f.unshift({name:j}),f.slice(0,5)})}).catch(m=>{x(!1),b(m.message)})},se=u=>{const m=u.target.value;g(m),m.length>2?fetch(`${L}/city-suggestions?city=${m}`).then(p=>p.json()).then(p=>{p.cities?N(p.cities):N([])}).catch(p=>{console.error("Error fetching city suggestions:",p)}):N([])},ae=u=>{const{lat:m,lon:p,name:f,state:C,country:D}=u;g(f),N([]);const V={name:f,state:C,country:D};x(!0),i(!0),fetch(`${L}/weather?lat=${m}&lon=${p}`).then(A=>A.json()).then(A=>{h({...A,...V}),x(!1)}).catch(A=>{console.error("Error fetching weather data:",A),x(!1),i(!1)})},H=()=>{I(!0),k(!0)},G=()=>{I(!1)},W=s.useRef(null);s.useEffect(()=>{const u=()=>{clearTimeout(W.current),$||(W.current=setTimeout(()=>{H()},3e5))};return window.addEventListener("mousemove",u),window.addEventListener("keydown",u),window.addEventListener("click",u),W.current=setTimeout(()=>{H()},3e5),()=>{clearTimeout(W.current),window.removeEventListener("mousemove",u),window.removeEventListener("keydown",u),window.removeEventListener("click",u)}},[$]);const re=u=>{const{name:m,value:p}=u.target;l(f=>({...f,[m]:p}))},ne=async u=>{if(u.preventDefault(),b(null),!r.name||!r.email||!r.feedback){b("All fields are required.");return}try{const{data:m,error:p}=await je.from("feedback").insert([{name:r.name,email:r.email,feedback:r.feedback}]);if(p){console.error("Error submitting feedback:",p.message),b("Failed to submit feedback. Please try again.");return}console.log("Feedback submitted successfully:",m),alert("Thank you for your feedback!"),l({name:"",email:"",feedback:""}),G()}catch(m){console.error("Unexpected error:",m),b("An unexpected error occurred. Please try again.")}},[oe,Be]=s.useState(!1);return e.jsxs("div",{className:`app-container ${oe?"dark":""} ${t}`,children:[e.jsxs("div",{className:"top-section",children:[e.jsxs("div",{className:"sky-background",children:[t==="night"&&e.jsx("div",{className:"shooting-stars"}),t==="night"&&e.jsx("div",{className:"moon"}),t!=="night"&&e.jsx("div",{className:`sun ${t}`}),e.jsx("div",{className:"clouds"})]}),e.jsx(P,{}),e.jsx(Le,{city:j,suggestions:S,errorMessage:v,setCity:g,handleCityChange:se,handleCitySelect:ae,handleWeatherSubmit:te,hasCityBeenEntered:i})]}),e.jsxs("div",{className:"content",children:[e.jsx(Oe,{cities:w,onCityClick:y,onRemoveCity:_}),d?e.jsx(Fe,{weatherData:d,city:j,cityHasBeenEntered:o,errorMessage:v,setErrorMessage:b,loading:c}):e.jsx(Re,{})]}),e.jsx("footer",{className:"py-8 bg-blue-500 dark:bg-[#312e81] dark:text-[#cbd5e1] text-white text-center flex flex-col items-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("button",{onClick:H,className:"bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 dark:bg-[#312e81] dark:text-[#cbd5e1] rounded-lg",children:a.Give}),e.jsxs("p",{children:["© 2024 WeatherLink. ",a.Rights]})]})}),e.jsx(Q,{isVisible:M,onClose:G,onSubmit:ne,formData:r,handleFeedbackChange:re})]})}function He(){const[t,n]=s.useState(""),[r,l]=s.useState(""),[o,i]=s.useState(!1),[a,d]=s.useState(!1),[h,c]=s.useState({name:"",email:"",feedback:""}),[x,j]=s.useState(""),[g,S]=s.useState(null),N=["/images/noaa-day-clouds-unsplash.jpg?v=1","/images/noaa-grassfield-unsplash.jpg?v=1","/images/noaa-night-lightning-unsplash.jpg?v=1","/images/noaa-ocean-sunset-unsplash.jpg?v=1","/images/noaa-snowy-terrain-unsplash.jpg?v=1"];s.useEffect(()=>{j(N[Math.floor(Math.random()*N.length)]);const w=JSON.parse(localStorage.getItem("cachedWeatherData"));w&&w.data?S(w.data):console.warn("No cached weather data found.")},[]);const v=()=>d(!0),b=()=>d(!1),M=k=>{const{name:w,value:F}=k.target;c(y=>({...y,[w]:F}))},I=async k=>{k.preventDefault();try{console.log("Feedback submitted:",h),c({name:"",email:"",feedback:""}),b()}catch(w){console.error("Error submitting feedback:",w)}},$=async k=>{if(k.preventDefault(),i(!0),l(""),!g){l("No weather data available. Please try refreshing the page."),i(!1);return}try{const w=`
        Provide tailored weather advice based on the following data:
        - City: ${g.city}
        - Temperature: ${g.temperature_fahrenheit}°F (${g.temperature_celsius}°C)
        - Humidity: ${g.humidity}%
        - Weather Condition: ${g.description}
        - Max Temperature: ${g.max_temp_fahrenheit}°F (${g.max_temp_celsius}°C)
        - Min Temperature: ${g.min_temp_fahrenheit}°F (${g.min_temp_celsius}°C)
        - UV Index: ${g.uv_index}
        - Air Quality Index: ${g.air_quality}
        User Input: ${t}
        Respond with activities and precautions in **exactly 4 sentences** or fewer. Be brief, clear, and to the point.
      `,F=await me.post(`${L}/generate-prompt`,{user_input:w});l(F.data.response)}catch{l("Error generating tailored advice. Please try again.")}finally{i(!1)}};return e.jsxs("div",{children:[e.jsx("header",{className:"p-2 py-8 flex flex-col align-items-center bg-white dark:bg-[#0f172a]",children:e.jsx(P,{})}),e.jsx("div",{style:{backgroundImage:`url(${x})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:"calc(100vh - 10rem)"},className:"flex flex-col justify-center items-center",children:e.jsxs("div",{className:"relative flex flex-col items-center justify-center min-h-[80vh] text-black p-8 rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Tailored Advice"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Ask for weather-based advice here!",value:t,onChange:k=>n(k.target.value),className:"border rounded w-full p-8"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:o?"Loading...":"Get Advice"})]}),r&&e.jsxs("div",{className:"mt-4 p-4 border rounded bg-gray-100",children:[e.jsx("h2",{className:"font-semibold text-xl mb-2",children:"AI Response"}),e.jsx("ul",{className:"space-y-2",children:r.split(`
`).map((k,w)=>e.jsx("li",{className:"text-lg leading-relaxed",children:k},w))}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>alert("Explore more activities tailored for today's weather!"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Explore Activities"})})]})]})}),e.jsx("footer",{className:"py-8 bg-blue-500 dark:bg-[#312e81] dark:text-[#cbd5e1] text-white text-center flex flex-col items-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("button",{onClick:v,className:"bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 dark:bg-[#312e81] dark:text-[#cbd5e1] rounded-lg",children:"Give Feedback"}),e.jsx("p",{children:"© 2024 WeatherLink. All rights reserved."})]})}),e.jsx(Q,{isVisible:a,onClose:b,onSubmit:I,formData:h,handleFeedbackChange:M})]})}function De(){return e.jsxs("div",{className:"p-2 py-8 flex flex-col align-items-center bg-white dark:bg-[#0f172a]",children:[e.jsx(P,{}),e.jsxs("div",{className:"relative flex flex-col items-center justify-center min-h-screen bg-white text-black p-8",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20"}),e.jsxs("div",{className:"relative z-10 w-full max-w-5xl p-8 bg-blue-500 bg-opacity-90 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-4xl font-bold text-center text-black mb-4",children:"About Us"}),e.jsx("p",{className:"text-center text-lg text-black mb-12",children:"This is a weather app project created for our software engineering course. We believe that there are features that are missing that could better inform the user when it comes to the weather. We hope to create an app that people can love and appreciate."}),e.jsxs("div",{className:"flex flex-col items-start p-4 bg-blue-400 rounded-lg",children:[e.jsx("h3",{className:"text-2xl font-semibold text-black mb-2",children:"Our Goal"}),e.jsx("p",{className:"text-black",children:"This project's main goal is to have a functional app that tends to all the user's needs while embedding features that enhances the user experience."})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:"https://via.placeholder.com/100",alt:"Team Member 2",className:"w-24 h-24 rounded-full mb-4 border-2 border-blue-400"}),e.jsx("h4",{className:"text-xl font-semibold text-black",children:"Anthony Rojas"}),e.jsx("p",{className:"text-black",children:"ajr203@txstate.edu"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:"https://via.placeholder.com/100",alt:"Team Member 2",className:"w-24 h-24 rounded-full mb-4 border-2 border-blue-400"}),e.jsx("h4",{className:"text-xl font-semibold text-black",children:"Ian Lingo"}),e.jsx("p",{className:"text-black",children:"khj23@txstate.edu"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:"https://via.placeholder.com/100",alt:"Team Member 3",className:"w-24 h-24 rounded-full mb-4 border-2 border-blue-400"}),e.jsx("h4",{className:"text-xl font-semibold text-black",children:"Nicholas Esteves"}),e.jsx("p",{className:"text-black",children:"scr145@txstate.edu"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:"https://via.placeholder.com/100",alt:"Team Member 4",className:"w-24 h-24 rounded-full mb-4 border-2 border-blue-400"}),e.jsx("h4",{className:"text-xl font-semibold text-black",children:"Taj Telesford"}),e.jsx("p",{className:"text-black",children:"ybh5@txstate.edu"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:"https://via.placeholder.com/100",alt:"Team Member 4",className:"w-24 h-24 rounded-full mb-4 border-2 border-blue-400"}),e.jsx("h4",{className:"text-xl font-semibold text-black",children:"Ethan Perez"}),e.jsx("p",{className:"text-black",children:"lyg23@txstate.edu"})]})]})]})]})]})}function Ve(){const[t,n]=s.useState([]),[r,l]=s.useState(!0),[o,i]=s.useState(null),a="http://localhost:5000";return s.useEffect(()=>{fetch(`${a}/weather-articles`).then(d=>{if(!d.ok)throw new Error(`HTTP error! Status: ${d.status}`);return d.json()}).then(d=>{const h=(d.articles||[]).filter(c=>c.title!=="[Removed]"&&c.description!=="[Removed]");n(h),l(!1)}).catch(d=>{console.error("Error fetching articles:",d),i(d),l(!1)})},[a]),r?e.jsx("p",{className:"text-center text-blue-500 text-xl",children:"Loading..."}):o?e.jsxs("p",{className:"text-center text-red-500 text-xl",children:["Error: ",o.message]}):e.jsxs("div",{className:"p-2 py-8 flex flex-col align-items-center bg-white dark:bg-[#0f172a]",children:[e.jsx(P,{}),e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-6 text-gray-800",children:"Weather Articles"}),e.jsx("ul",{className:"space-y-6",children:t.map((d,h)=>e.jsxs("li",{className:"p-4 border rounded-lg shadow-md hover:shadow-lg transition duration-300",children:[e.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-xl font-semibold text-blue-600 hover:underline",children:d.title}),e.jsx("p",{className:"mt-2 text-gray-600",children:d.description})]},h))})]})]})}xe(document.getElementById("root")).render(e.jsx(ve,{children:e.jsx(s.StrictMode,{children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(T,{path:"/news",element:e.jsx(Ve,{})}),e.jsx(T,{path:"/",element:e.jsx(ze,{})}),e.jsx(T,{path:"/coords/:lat/:long/",element:e.jsx(Se,{})}),e.jsx(T,{path:"/tailored-advice",element:e.jsx(He,{})}),e.jsx(T,{path:"/contact",element:e.jsx(De,{})})]})})})}));
