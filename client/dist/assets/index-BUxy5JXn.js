var q=Object.defineProperty;var Q=(t,s,a)=>s in t?q(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var I=(t,s,a)=>Q(t,typeof s!="symbol"?s+"":s,a);import{r as i,j as e,u as X,M as Z,a as J,S as _,L as T,i as ee,g as te,b as se,c as re,d as ae,e as ne,B as oe,R as ie,f as P}from"./vendor-cmgFq0BW.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}})();const A={enterCoordinates:"Enter Coordinates",Latitude:"Latitude",Longitude:"Longitude",Submit:"Submit",enterLat:"Enter latitude",enterLon:"Enter longitude",Features:"Features",accurateForecasts:"Accurate Forecasts",reportLocation:"Get up-to-the-minute weather reports based on your location.",interactiveMaps:"Interactive Maps",weatherMaps:"Visualize weather patterns with dynamic weather maps.",alertsWarnings:"Alerts & Warnings",timelyAlerts:"Receive timely alerts on severe weather conditions in your area.",closeMap:"To close map, click outside the modal.",Legend:"Legend",Clouds:"Clouds",Precipitation:"Precipitation",Temperature:"Temperature",feedbackForm:"Feedback Form",Email:"Email",Feedback:"Feedback",yourFeedback:"We'd Love Your Feedback",Name:"Name",High:"High",Low:"Low",windSpeed:"Wind Speed",windDescription:"Wind Description",Wind:"Wind",Home:"Home",Contact:"Contact",logIn:"Log in",Latest:"Get the Latest Weather Updates",cityName:"Enter a city name to get current weather updates.",enterName:"Enter city name",currentWeather:"Current Weather",Load:"Loading weather data...",noWeather:"No weather data available. Please enter a city to check the weather.",weatherFor:"Weather for",Condition:"Condition",Humidity:"Humidity",UV:"UV Index",MaxUV:"Max UV Index",Air:"Air Quality",Nodata:"No weather data available.",Rights:"All rights reserved.",Give:"Give Feedback",enterLan:"Enter your perferred language.",English:"English",Spanish:"Spanish",French:"French",German:"German"},W=i.createContext(),y=()=>i.useContext(W),le=({children:t})=>{const[s,a]=i.useState("EN"),[n,r]=i.useState({}),l=async(h,d)=>{const c=await fetch("http://localhost:5000/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({texts:Object.values(h),target_lang:d})}),g=await c.json();if(c.ok){const b={};Object.keys(h).forEach((f,w)=>{b[f]=g.translated_texts[w]}),r(b)}else throw new Error(g.error||"Translation failed")},o=async h=>{a(h),await l(A,h)};return i.useEffect(()=>{r(A)},[]),e.jsx(W.Provider,{value:{language:s,translatedText:n,handleLanguageChange:o},children:t})},$=()=>{const[t,s]=i.useState(!1),[a,n]=i.useState(!1),{translatedText:r}=y();return e.jsx("div",{className:t?"dark":"",children:e.jsxs("nav",{className:"text-black dark:bg-[#312e81] dark:text-[#cbd5e1]",children:[e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"WeatherLink"}),e.jsx("button",{onClick:()=>n(!a),className:"md:hidden text-white focus:outline-none",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xlmns:"https://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("ul",{className:"hidden md:flex space-x-6",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.Home})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.Features})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.Contact})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.logIn})}),e.jsxs("li",{children:[" ",e.jsx("button",{onClick:()=>s(!t),className:"ml-1 px-2 py-1 text-sm bg-blue-500 text-white dark:bg-[#1e1b4b] dark:text-[#cbd5e1] rounded-lg",children:t?"Light Mode":"Dark Mode"})]})]})]}),a&&e.jsxs("ul",{className:"md:hidden flex flex-col space-y-4 mt-4 text-center",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.Home})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.Features})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.Contact})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:bg-blue-700 dark:hover:bg-[#1e1b4b] px-3 py-2 rounded transition-colors duration-200",children:r.logIn})}),e.jsxs("li",{children:[" ",e.jsx("button",{onClick:()=>s(!t),className:"ml-1 px-2 py-1 bg-blue-500 text-white dark:bg-[#1e1b4b] dark:text-[#cbd5e1] rounded-lg",children:t?"Light Mode":"Dark Mode"})]})]})]})})},ce=t=>(console.error("Error: ",t),{errorMessage:"An error occurred. Please try again later."}),de=(t,s)=>t.ok?t:{errorMessage:s||"Failed to fetch data from the server."},he=(t,s)=>s?null:{errorMessage:`${t} is required.`},C={handleError:ce,handleApiError:de,handleValidationError:he},ue=()=>{const[t,s]=i.useState(null),[a,n]=i.useState(null),{translatedText:r}=y(),l=X(),{lat:o,long:h}=l.state||{};return i.useEffect(()=>{o&&h&&fetch(`http://localhost:5000/coords/${o}/${h}/`).then(d=>{const c=C.handleApiError(d,"Failed to fetch weather data.");return c.errorMessage&&n(c.errorMessage),c.json()}).then(d=>{s(d)}).catch(d=>{const c=C.handleError(d);n(c.errorMessage)})},[o,h]),e.jsxs("div",{className:"py-8",children:[a&&e.jsx("p",{className:"text-red-500",children:a}),e.jsxs("div",{className:"container mx-auto text-center",children:[e.jsx($,{}),e.jsxs("header",{className:"bg-blue-500 dark:bg-[#1e1b4b] dark:text-[#cbd5e1] flex-col text-white py-24 text-center",children:[e.jsx("h2",{className:"text-4xl font-bold",children:r.currentWeather}),t?e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-[#312e81] dark:text-[#cbd5e1] rounded-lg shadow-lg",children:[e.jsx("h3",{className:"text-2xl text-[#1e3a8a] dark:bg-[#312e81] dark:text-[#cbd5e1] font-bold",children:t.city}),e.jsx("h3",{className:"text-xl text-[#1e3a8a] dark:bg-[#312e81] dark:text-[#cbd5e1] font-bold",children:t.description})]}):e.jsx("p",{className:"text-center dark:text-[#cbd5e1]",children:r.Load})]})]})]})},xe=({id:t})=>e.jsx("img",{src:`https://openweathermap.org/img/wn/${t}@2x.png`,alt:"Weather Icon"});class pe{constructor(){I(this,"OpenMeteoPrecipitateIconMapping",{"No rain":"01n","Light rain":"10n","Moderate rain":"10n","Heavy rain":"10n","Light snow":"13n","Moderate snow":"13n","Heavy snow":"13n"});I(this,"OpenMeteoWindIconMapping",{Calm:"calm.png","Light breeze":"light_breeze.png","Gentle breeze":"gentle_breeze.png","Moderate breeze":"moderate_breeze.png","Strong breeze":"strong_breeze.png"})}OpenMeteoForecastingIcons(s,a){const n=this.OpenMeteoPrecipitateIconMapping[s]||"default_precipitate.png";return this.OpenMeteoWindIconMapping[a],{precipitateIcon:`https://openweathermap.org/img/wn/${n}@2x.png`}}OpenWeatherIcons(s){try{const a=`https://openweathermap.org/img/wn/${s}@2x.png`;if(!fetch(a).ok)throw new Error(`Image not found for ID: ${s}`);return a}catch(a){console.log(a)}}}const me=({icon:t,date:s,maxC:a,maxF:n,minC:r,minF:l,precipitationDescription:o,winddescription:h,windspeed:d,isFahrenheit:c})=>{const{translatedText:g}=y(),b=(m,N,k)=>{const E=k-N;return(m-N)/E*100},f=(l+n)/2,w=b(f,l,n);return e.jsxs("div",{className:"weather-card max-w-xs w-full sm:w-1/2 md:w-1/3 lg:w-1/6 p-4 m-2 bg-white rounded-3xl hover:shadow-2xl transition-transform hover:scale-105 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-left text-lg font-semibold text-gray-800 dark:text-gray-100",children:s}),e.jsx("img",{src:t.precipitateIcon,alt:"Weather Icon",className:"w-12 h-12 md:w-16 md:h-16"})]}),e.jsxs("div",{className:"relative flex items-center mb-4",children:[e.jsx("span",{className:"text-left text-sm md:text-lg text-gray-600 dark:text-gray-300",children:c?`${l}°F `:`${r}°C`}),e.jsx("div",{className:"w-full h-2 mx-2 bg-gradient-to-r from-blue-400 via-yellow-300 to-red-500 rounded-full relative",children:e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg",style:{left:`${w}%`}})}),e.jsx("span",{className:"text-right text-sm md:text-lg text-gray-600 dark:text-gray-300",children:c?`${n}°F `:`${a}°C`})]}),e.jsxs("div",{className:"flex flex-col text-left space-y-1 text-gray-700 dark:text-gray-300 text-sm md:text-base",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[g.Wind,":"]}),e.jsx("span",{children:h})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[g.windSpeed,":"]}),e.jsxs("span",{children:[d," m/s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[g.Precipitation,":"]}),e.jsx("span",{children:o})]})]})]})},ge=({forecastData:t,cityhasBeenEntered:s,errorMessage:a,setError:n,isFahrenheit:r})=>{const l=new pe;return e.jsx("div",{className:"container flex flex-wrap justify-center items-center mx-auto gap-5",children:t?t.map((o,h)=>e.jsx(e.Fragment,{children:e.jsx(me,{icon:l.OpenMeteoForecastingIcons(o.precipitateDescription,o.winddescription),date:h==0?o.date="Today":o.date,maxC:o.maxC,maxF:o.maxF,minC:o.minC,minF:o.minF,precipitationDescription:o.precipitateDescription,winddescription:o.winddescription,windspeed:o.windspeed,isFahrenheit:r},h)})):e.jsx("p",{children:a})})},fe=()=>{const{language:t,handleLanguageChange:s}=y(),{translatedText:a}=y(),n=r=>{s(r.target.value)};return e.jsxs("div",{children:[e.jsx("p",{className:"mt-4 text-lg",children:a.enterLan}),e.jsxs("select",{placeholder:a.English,value:t,onChange:n,className:`appearance-none px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white dark:bg-[#312e81] dark:text-white \r
                focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm font-medium text-gray-700`,children:[e.jsx("option",{value:"EN",children:a.English}),e.jsx("option",{value:"ES",children:a.Spanish}),e.jsx("option",{value:"FR",children:a.French}),e.jsx("option",{value:"DE",children:a.German})]})]})},be=({city:t,suggestions:s,errorMessage:a,setcity:n,handleCityChange:r,handleCitySelect:l,handleWeatherSubmit:o})=>{const h=c=>{c.key==="Enter"&&o(c)},{translatedText:d}=y();return e.jsxs("header",{className:" dark:bg-[#1e1b4b] dark:text-[#cbd5e1] text-black py-24 text-center",style:{borderRadius:"5rem"},children:[e.jsx("h2",{className:"text-4xl font-bold",children:d.Latest}),e.jsx("p",{className:"mt-4 text-lg",children:d.cityName}),e.jsx(e.Fragment,{children:a&&e.jsx("p",{className:"text-center text-red-500",children:a})}),e.jsx("form",{onSubmit:o,className:"mt-8",children:e.jsxs("div",{className:"relative inline-block w-full max-w-sm",children:[e.jsx("input",{type:"text",value:t,onChange:r,onKeyDown:h,placeholder:d.enterName,className:"text-black w-full px-6 py-3 border rounded-full text-sm shadow-md focus:outline-none focus:border-blue-800"}),s.length>0&&e.jsx("ul",{className:"absolute left-0 right-0 z-10 mt-1 bg-white shadow-lg border rounded text-left",children:s.map((c,g)=>e.jsxs("li",{onClick:()=>l(c),className:"cursor-pointer p-2 bg-blue-50 dark:bg-[#312e81] text-gray-800 dark:text-white hover:bg-gray-400 dark:hover:bg-gray-600",children:[c.name,", ",c.state||""," (",c.country,")"]},g))})]})}),e.jsx(fe,{})]})},je=({weatherData:t,isFahrenheit:s,setIsFahrenheit:a})=>{const{translatedText:n}=y(),[r,l]=i.useState(!1),[o,h]=i.useState({WEATHER_API_KEY:"",MAP_API_KEY:""}),[d,c]=i.useState({latitude:30.2672,longitude:-97.7431,zoom:9,width:"100%",height:"400px"}),[g,b]=i.useState(!1),[f,w]=i.useState(!1),[m,N]=i.useState(!1);i.useEffect(()=>{fetch("http://localhost:5000/api/keys").then(v=>v.json()).then(v=>h(v)).catch(v=>console.error("Error fetching API keys:",v))},[]);const k=()=>l(!0),E=()=>l(!1),S=()=>{a(!s)};return t?e.jsxs("div",{className:"py-8",children:[e.jsx("div",{className:"container rounded-xlmx-auto text-center",children:e.jsx("div",{className:"p-6 flex flex-col items-center text-white",children:e.jsxs("div",{className:"flex relative justify-between items-start w-full bg-blue-500 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("h3",{className:"text-6xl font-bold mr-4",children:s?`${Math.round(t.temperature_fahrenheit)}°F`:`${Math.round(t.temperature_celsius)}°C`}),e.jsx("div",{className:`relative w-14 h-8 flex items-center ${s?"bg-green-300":"bg-gray-300"} dark:bg-gray-700 rounded-full p-1 cursor-pointer transition-all duration-300 ease-in-out ${s?"justify-end":"justify-start"}`,onClick:S,children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out"})}),e.jsx("p",{className:"text-md mt-2 ml-2",children:s?" °F":" °C"})]}),e.jsxs("p",{className:"text-lg mb-4",children:[t.city,", ",t.state||"N/A",", ",t.country]}),e.jsxs("p",{className:"text-lg mb-4",children:["H: ",s?`${Math.round(t.max_temp_fahrenheit)}°F`:`${Math.round(t.max_temp_celsius)}°C`,"   L: ",s?`${Math.round(t.min_temp_fahrenheit)}°F`:`${Math.round(t.min_temp_celsius)}°C`]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(xe,{id:t.openweathericonid})}),e.jsx("p",{className:"text-xl mt-4",children:t.description}),e.jsxs("div",{className:"mt-4 space-y-2 text-center flex flex-col items-center",children:[e.jsxs("div",{className:"flex flex-wrap gap-x-4 justify-center",children:[e.jsxs("p",{className:"text-lg",children:[n.Humidity,": ",t.humidity,"%"]}),e.jsxs("p",{className:"text-lg",children:[n.Air,": ",t.air_quality," AQI"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 justify-center",children:[e.jsxs("p",{className:"text-lg",children:[n.UV,": ",t.uv_index?Number(t.uv_index).toFixed(2):"N/A"]}),e.jsxs("p",{className:"text-lg",children:[n.MaxUV,": ",t.max_uv_index?Number(t.max_uv_index).toFixed(2):"N/A"]})]})]})]}),e.jsxs("div",{className:"absolute top-1/2 right-8 transform -translate-y-1/2",children:[e.jsx("div",{className:"absolute inset-0 w-80px h-80px rounded-full bg-white/10 z-[-1]"}),e.jsx("img",{src:"/images/Realistic_Earth_Image.png",alt:"Globe with Transparent Background",onClick:k,className:"cursor-pointer hover:scale-110 hover:rotate-6 transition-transform duration-200 group-hover:shadow-lg",style:{width:"200px",height:"200px",borderRadius:"50%",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",clipPath:"circle(45% at 50% 50%)",animation:"float 3s ease-in-out infinite",perspective:"1000px",filter:"drop-shadow(0 0 10px rgba(0, 128, 255, 0.5))"}})]})]})})}),e.jsxs(Z,{isOpen:r,onRequestClose:E,contentLabel:"Map Modal",style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"},content:{width:"90%",height:"80%",margin:"auto",padding:"0",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"10px",overflow:"hidden"}},children:[e.jsx("div",{style:{position:"absolute",top:"10px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"5px",fontSize:"14px",textAlign:"center"},children:n.closeMap}),e.jsxs("div",{className:"absolute top-4 left-4 bg-black bg-opacity-70 text-white p-4 rounded-md z-10",children:[e.jsx("h4",{children:n.Legend}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:g,onChange:()=>b(!g)}),n.Clouds]}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:f,onChange:()=>w(!f)}),n.Precipitation]}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:m,onChange:()=>N(!m)}),n.Temperature]})]}),e.jsxs(J,{...d,mapboxAccessToken:o.MAP_API_KEY,onMove:v=>c(v.viewState),mapStyle:"mapbox://styles/mapbox/streets-v11",scrollZoom:!0,dragPan:!0,touchRotate:!0,children:[g&&e.jsx(_,{id:"clouds",type:"raster",tiles:[`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${o.WEATHER_API_KEY}`],tileSize:256,children:e.jsx(T,{id:"clouds-layer",type:"raster"})}),f&&e.jsx(_,{id:"precipitation",type:"raster",tiles:[`https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=${o.WEATHER_API_KEY}`],tileSize:256,children:e.jsx(T,{id:"precipitation-layer",type:"raster"})}),m&&e.jsx(_,{id:"temperature",type:"raster",tiles:[`https://tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=${o.WEATHER_API_KEY}`],tileSize:256,children:e.jsx(T,{id:"temperature-layer",type:"raster"})})]})]})]}):e.jsx("p",{children:n.noWeather})},ye=({weatherData:t,city:s,cityHasBeenEntered:a,errorMessage:n,setErrorMessage:r,loading:l,forecastingData:o})=>{const[h,d]=i.useState(!0),[c,g]=i.useState([]),{translatedText:b}=y();i.useEffect(()=>{t&&(async()=>{try{const m=await fetch(`http://localhost:5000/forecast?city=${t.city}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!m.ok)throw new Error("Failed to fetch forecast data");const N=await m.json();g(N)}catch(m){setError(m.message)}})()},[t]);const f=()=>e.jsxs("div",{className:"flex justify-center items-center py-16",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"dark:text-[#cbd5e1] text-lg ml-4",children:b.Load})]});return e.jsx("div",{className:"flex flex-col items-center justify-center w-full unified-weather-card rounded-3xl bg-blue-500",style:{borderRadius:"5rem",transform:"scale(0.9)",transformOrigin:"top center"},children:l?e.jsx(f,{}):e.jsxs("div",{className:" pb-6",children:[e.jsx(je,{weatherData:t,isFahrenheit:h,setIsFahrenheit:d}),e.jsx(ge,{forecastData:c,cityhasBeenEntered:a,errorMessage:n,setError:r,isFahrenheit:h})]})})},we=({isVisible:t,onClose:s,onSubmit:a,formData:n,handleFeedbackChange:r})=>{if(!t)return null;const{translatedText:l}=y();return e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg relative",children:[e.jsx("button",{onClick:s,className:"absolute top-2 right-2",children:"X"}),e.jsx("h2",{className:"text-xl font-bold",children:"We'd Love Your Feedback"}),e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",className:"w-full px-3 py-2 border rounded",required:!0,value:n.name,onChange:r})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"w-full px-3 py-2 border rounded",required:!0,value:n.email,onChange:r})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"feedback",children:"Feedback"}),e.jsx("textarea",{id:"feedback",name:"feedback",className:"w-full px-3 py-2 border rounded",required:!0,value:n.feedback,onChange:r})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:l.Submit})]})]})})},ve={apiKey:"AIzaSyBFCQ9eBUEmc7FkERC0tzvfOpZQmzoGIWs",authDomain:"weatherlink-ac684.firebaseapp.com",projectId:"weatherlink-ac684",storageBucket:"weatherlink-ac684.appspot.com",messagingSenderId:"586202821312",appId:"1:586202821312:web:5c6daf4b660634eed6f325",measurementId:"G-GT64NDNBQG"},R=ee(ve);te(R);const Ne=se(R),ke=()=>e.jsxs("div",{className:"flex justify-center items-center py-16",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"dark:text-[#cbd5e1] text-lg ml-4",children:"Loading weather data..."})]});function Ee(){const[t,s]=i.useState({name:"",email:"",feedback:""}),[a,n]=i.useState(!1);i.useState(!1);const{translatedText:r}=y(),[l,o]=i.useState(null),[h,d]=i.useState(!1),[c,g]=i.useState(""),[b,f]=i.useState([]),[w,m]=i.useState(null),[N,k]=i.useState(!1);i.useState(null);const[E,S]=i.useState(!1),v=(u,x)=>{d(!0),fetch(`http://localhost:5000/weather?lat=${u}&lon=${x}`).then(p=>{const j=C.handleApiError(p,"Failed to fetch weather data.");return j.errorMessage&&m(j.errorMessage),j.json()}).then(p=>{console.log(p),o(p),d(!1)}).catch(p=>{const j=C.handleError(p);m(j.errorMessage),d(!1)})};i.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(u=>{const{latitude:x,longitude:p}=u.coords;v(x,p)},u=>{m("Unable to access location. Please enter a city manually.")}):m("Geolocation is not supported by your browser.")},[]);const z=u=>{if(u.preventDefault(),!c){alert("Please enter a city");return}d(!0),fetch(`http://localhost:5000/weather?city=${c}`).then(x=>{if(!x.ok)throw x.status===404?new Error("City not found. Please try again."):new Error("Failed to fetch weather data. Please try again later.");return x.json()}).then(x=>{o(x),d(!1),f([]),m(null)}).catch(x=>{d(!1),m(x.message)})},O=u=>{const x=u.target.value;g(x),x.length>2?fetch(`http://localhost:5000/city-suggestions?city=${x}`).then(p=>p.json()).then(p=>{p.cities?f(p.cities):f([])}).catch(p=>{console.error("Error fetching city suggestions:",p)}):f([])},H=u=>{const{lat:x,lon:p,name:j,state:U,country:D}=u;g(j),f([]);const Y={name:j,state:U,country:D};d(!0),n(!0),fetch(`http://localhost:5000/weather?lat=${x}&lon=${p}`).then(M=>M.json()).then(M=>{o({...M,...Y}),d(!1)}).catch(M=>{console.error("Error fetching weather data:",M),d(!1),n(!1)})},F=()=>{k(!0),S(!0)},B=()=>{k(!1)},L=i.useRef(null);i.useEffect(()=>{const u=()=>{clearTimeout(L.current),E||(L.current=setTimeout(()=>{F()},3e5))};return window.addEventListener("mousemove",u),window.addEventListener("keydown",u),window.addEventListener("click",u),L.current=setTimeout(()=>{F()},3e5),()=>{clearTimeout(L.current),window.removeEventListener("mousemove",u),window.removeEventListener("keydown",u),window.removeEventListener("click",u)}},[E]);const G=u=>{const{name:x,value:p}=u.target;s(j=>({...j,[x]:p}))},K=async u=>{u.preventDefault();try{await re(ae(Ne,"feedback"),t),console.log("Feedback submitted successfully"),s({name:"",email:"",feedback:""})}catch(x){const p=C.handleError(x);m(p.errorMessage)}},[V,Me]=i.useState(!1);return e.jsxs("div",{className:`py-8 flex-col ${V?"dark":""} overflow-x-hidden`,children:[e.jsxs("div",{className:"p-2 flex flex-col align-items-center bg-white dark:bg-[#0f172a]",children:[e.jsx($,{}),e.jsx(be,{city:c,suggestions:b,errorMessage:w,setCity:g,handleCityChange:O,handleCitySelect:H,handleWeatherSubmit:z,hasCityBeenEntered:n}),l?e.jsx(ye,{weatherData:l,city:c,cityHasBeenEntered:a,errorMessage:w,setErrorMessage:m,loading:h}):e.jsx(ke,{}),e.jsx("footer",{className:"py-8 bg-blue-500 dark:bg-[#312e81] dark:text-[#cbd5e1] text-white text-center flex flex-col items-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("button",{onClick:F,className:"bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 dark:bg-[#312e81] dark:text-[#cbd5e1] rounded-lg",children:r.Give}),e.jsxs("p",{children:["© 2024 WeatherLink. ",r.Rights]})]})})]}),e.jsx(we,{isVisible:N,onClose:B,onSubmit:K,formData:t,handleFeedbackChange:G})]})}ne(document.getElementById("root")).render(e.jsx(le,{children:e.jsx(i.StrictMode,{children:e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(P,{path:"/",element:e.jsx(Ee,{})}),e.jsx(P,{path:"/coords/:lat/:long/",element:e.jsx(ue,{})})]})})})}));
